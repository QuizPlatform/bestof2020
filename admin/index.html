<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz | Admin</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>

  <a style="padding:20px; margin:20px" href="/" class="btn btn-primary btn-sm">Home</a>
  <a style="padding:20px; margin:20px" href="/backup" class="btn btn-primary btn-sm">Backup Page</a>
  <a style="padding:20px; margin:20px" href="/register" class="btn btn-primary btn-sm">Registration Page</a>
  <a style="padding:20px; margin:20px" href="/check-answers" class="btn btn-primary btn-sm">Check answers</a>
  <a style="padding:20px; margin:20px" href="/scorecard" class="btn btn-primary btn-sm">Scorecard</a>
  <br>

  <div class="row" style="height:30vh">
    <div id="change-round-main" style="padding:20px ; margin:20px; border:outset; border-radius:10px" class="col-4">
      <div id="change-status-div" style="margin-top:10px" class="col">
        <h3>Change Round</h3>
        <label for="questionNo">Enter Question No:</label><br>
        <input type="number" id="questionNo" name="questionNo"><br>
        <button type="button" id="round-submit" class="btn btn-info btn-sm" onclick="changeValue()"
          style="margin-top:10px">Change Round</button>
      </div>
      <div id="current-round" style="padding:20px">
      </div>
    </div>

  </div>
  <!--end of row-->

  <div class="row">
    <div id="registration" class="col-12">

    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-analytics.js"></script>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyB1mz728tc9dqKGLUiPOAwxBxg20Gx4mSE",
      authDomain: "quizpriyam.firebaseapp.com",
      databaseURL: "https://quizpriyam.firebaseio.com",
      projectId: "quizpriyam",
      storageBucket: "quizpriyam.appspot.com",
      messagingSenderId: "968131692426",
      appId: "1:968131692426:web:467ddbadc7ef1ac1d4ea73",
      measurementId: "G-WQTBNGZXQS"
    };
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  </script>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>


  <script>
    async function changeValue() {
      // Firebase db initialisation
      var db = firebase.firestore();
      console.log('DB initialised');

      var questionNo = document.getElementById("questionNo").value
      console.log(questionNo);
      db.collection("admin").doc("adminControls069").update({ "round": questionNo })
    }

    var db = firebase.firestore();
    var roundDoc = db.collection("admin").doc("adminControls069");
    roundDoc.onSnapshot(function (doc) {
      document.getElementById("current-round").innerHTML = "Current Round is : " + doc.data()["round"];
      //console.log(doc.data()["round"]);
    });

    var input = document.getElementById("questionNo");
    input.addEventListener("keyup", function (event) {
      if (event.keyCode === 13) {
        event.preventDefault();
        document.getElementById("round-submit").click();
      }
    });
  </script>

</body>

</html>